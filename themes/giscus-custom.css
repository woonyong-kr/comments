/* =========================================================
   0) 공통 색 · Primer 토큰 매핑 (강조색 #2F81F7 고정)
   ========================================================= */
:root{
  --c-accent: #2F81F7;        /* 포커스/강조 기본색 */
  --c-black:  #000;
  --c-white:  #FFF;
  --c-border: #eaeaea;        /* 연한 경계 */
  --c-border-strong:#d1d5db;  /* 살짝 진한 경계 */
  --c-muted:  #666;
  --c-soft:   #ededed;        /* 인라인 코드/강조 배경 */
  --c-soft-2: #f6f6f6;        /* 인용 등 아주 연한 배경 */

  /* Primer v* 호환 강조 토큰(가능성 있는 키 전부 매핑) */
  --color-accent-fg: var(--c-accent);
  --color-accent-emphasis: var(--c-accent);
  --color-focus-outline: var(--c-accent);
  --fgColor-accent: var(--c-accent);                  /* 최신 토큰 */
  --control-outlineColor: var(--c-accent);            /* 포커스 링 */
  --button-default-focus-border: var(--c-accent);
  --button-default-focus-shadow: 0 0 0 3px var(--c-accent);
}

/* Primer 기본 톤(배경/텍스트/경계) */
:root{
  --color-fg-default: #000;
  --color-fg-muted: var(--c-muted);
  --color-canvas-default: var(--c-white);
  --color-canvas-subtle:  var(--c-white);
  --color-border-default: var(--c-border);
  --color-border-muted:   var(--c-border);

  --color-btn-text:   #000;
  --color-btn-bg:     var(--c-white);
  --color-btn-border: transparent;
  --color-btn-hover-bg: var(--c-white);
  --color-btn-hover-border: transparent;
  --color-btn-hover-shadow: none;
  --color-btn-inset-shadow: none;
  --color-btn-active-bg: var(--c-white);

  --color-btn-primary-text:   #FFF;
  --color-btn-primary-bg:     #000;
  --color-btn-primary-border: transparent;
  --color-btn-primary-hover-bg: var(--c-accent);
  --color-btn-primary-active-bg: var(--c-accent);
}

/* =========================================================
   1) 레이아웃/카드 : 불필요한 테두리·그림자 제거
   ========================================================= */
.giscus .gsc-comment,
.giscus .gsc-comment > .gsc-comment-content,
.giscus .gsc-comment .gsc-replies,
.giscus .gsc-comment-footer,
.giscus .gsc-comment-box{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}
.giscus .gsc-comment{ border-bottom: 0 !important; }
.giscus .gsc-comment + .gsc-comment{ border-top: 0 !important; }

.giscus .gsc-reply-box,
.giscus .gsc-comment .gsc-replies{
  background: var(--c-white) !important;
  border: 0 !important;
  box-shadow: none !important;
  border-radius: 0 0 20px 20px !important;           /* 위 직선, 아래만 둥글게 */
}

.giscus .gsc-comment-box{
  padding-left: 0 !important;                        /* 부모 폭에 맞춤 */
  padding-right: 0 !important;
}

/* =========================================================
   2) 정렬 토글(오래된/새로운) : 상태별 색상/모양
   ========================================================= */
.giscus .gsc-header .gsc-order :is(button,.BtnGroup-item,.btn,.btn-outline){
  border-radius: 9999px !important;
  border: 1px solid var(--c-border) !important;      /* 비활성 */
  background: var(--c-white) !important;
  color: #000 !important;
  box-shadow: none !important;
}
.giscus .gsc-header .gsc-order :is(
  button[aria-pressed="true"],
  .BtnGroup-item[aria-selected="true"],
  .btn[aria-pressed="true"]
){
  background: #000 !important;                       /* 선택됨 */
  color: #fff !important;
  border-color: transparent !important;
}
.giscus .gsc-header .gsc-order :is(button,.BtnGroup-item,.btn):hover{
  background: var(--c-accent) !important;            /* 호버 */
  color: #fff !important;
  border-color: transparent !important;
}

/* =========================================================
   3) 반응(이모지) : 기본은 흰 배경, 외곽선/그림자 제거
   ========================================================= */
.giscus .gsc-reactions :is(.btn,.Button,.gsc-reaction-button),
.giscus .gsc-reaction-summary :is(.btn,.Button){
  background: #FFF !important;                        /* 내용과 분리 */
  border: 0 !important;
  box-shadow: none !important;
  border-radius: 9999px !important;
}

/* =========================================================
   4) 배지/버튼 : 소유자 배지, 로그인/등록/취소
   ========================================================= */
.giscus .Label, .giscus .IssueLabel, .giscus .gsc-comment .Label{
  background: var(--c-accent) !important;
  color: #fff !important;
  border: 0 !important;
}
.giscus .gsc-login-button .btn-primary,
.giscus .gsc-comment-box .btn-primary{
  border-radius: 9999px !important;
  background: #000 !important;
  color: #fff !important;
  border: 0 !important;
  box-shadow: none !important;
}
.giscus .gsc-login-button .btn-primary:hover,
.giscus .gsc-comment-box .btn-primary:hover{
  background: var(--c-accent) !important;
}
.giscus .gsc-comment-box .btn:not(.btn-primary){
  border-radius: 9999px !important;
  background: var(--c-white) !important;
  color: #000 !important;
  border: 1px solid var(--c-border) !important;
  box-shadow: none !important;
}
.giscus .gsc-comment-box .btn:not(.btn-primary):hover{
  background: var(--c-accent) !important;
  color: #fff !important;
  border-color: transparent !important;
}
.giscus .gsc-login-button .btn-primary > span{ font-size:0 !important; }
.giscus .gsc-login-button .btn-primary > span::after{
  content: "로그인"; font-size:14px; line-height:1; margin-left:6px;
}

/* =========================================================
   5) 입력영역 : 부모 폭과 동일한 둥근 사각형 + 기본 포커스 제거
   ========================================================= */
.giscus :is(.gsc-comment-box textarea, .gsc-replies textarea, .gsc-reply-box textarea, textarea){
  width: 100% !important;
  box-sizing: border-box !important;
  background: var(--c-white) !important;
  border: 1px solid var(--c-border) !important;
  border-radius: 24px !important;
  margin: 0 !important;
  outline: 0 !important;
  box-shadow: none !important;
}
.giscus .gsc-comment-box :is(.tabnav, .tabnav-tab){
  background: var(--c-white) !important;
  border: 0 !important;
  box-shadow: none !important;
}

/* =========================================================
   6) 마크다운 : 제목/구분선/인용/코드
   ========================================================= */
.giscus .markdown-body h1,
.giscus .markdown-body h2{
  border-bottom: 1px solid var(--c-border) !important;
}
.giscus .markdown-body hr{
  background-color: var(--c-border) !important;
  border: 0 !important;
  height: 1px !important;
}
.giscus .markdown-body blockquote{
  border-left: 4px solid var(--c-border) !important;
  background: var(--c-soft-2) !important;
}

/* GFM 코드블록(.highlight pre 포함) */
.giscus :is(.markdown-body,.gsc-comment-box-markdown) :is(pre, .highlight pre){
  background: #292C33 !important;
  color: #f6f8fa !important;
  border: 0 !important;
  border-radius: 8px !important;
  padding: 12px !important;
  overflow: auto !important;
}
.giscus :is(.markdown-body,.gsc-comment-box-markdown) :is(pre, .highlight pre) > code{
  background: transparent !important;                 /* 이중 배경 방지 */
  color: inherit !important;
}
.giscus .markdown-body code:not(pre > code),
.giscus .markdown-body tt,
.giscus .markdown-body kbd,
.giscus .markdown-body mark{
  background: var(--c-soft) !important;
  border: 1px solid #efefef !important;
  border-radius: 4px !important;
  padding: .1em .35em !important;
}
.giscus .markdown-body :is(.clipboard-btn, .btn-octicon){
  border: 0 !important;
  box-shadow: none !important;
  background: var(--c-white) !important;
}

/* =========================================================
   7) “파란 하이라이트” 최우선 강제(링크/버튼/이모지/입력)
   ========================================================= */
/* 키보드 포커스가 보이도록 공통 규칙(최우선 !important) */
.giscus :is(a, button, [role="button"], .btn, .Button, .gsc-reaction-button):focus-visible{
  outline: 2px solid var(--c-accent) !important;      /* 선명한 파란 테두리 */
  outline-offset: 2px !important;
  box-shadow: 0 0 0 3px var(--c-accent) !important;   /* 보조 링(겹침 방지) */
  border-radius: 8px !important;
}

/* 링크 포커스 가시성 강화(본문/마크다운) */
.giscus .markdown-body a:focus-visible{
  background: #fff !important;                        /* 흰 바탕 위 강조 */
  border-radius: 4px !important;
}

/* 입력창 포커스(바깥 래퍼 + 텍스트영역) */
.giscus .gsc-comment-box:focus-within,
.giscus .gsc-reply:focus-within,
.giscus .gsc-replies .gsc-reply:focus-within{
  box-shadow: 0 0 0 3px var(--c-accent) !important;
  border-radius: 28px !important;
  background: #fff !important;
}
.giscus :is(.gsc-comment-box textarea, .gsc-replies textarea, .gsc-reply-box textarea):focus{
  border-color: var(--c-accent) !important;
  box-shadow: 0 0 0 2px var(--c-accent) inset !important;
}

/* 이모지(반응) 선택/포커스 : 흰 배경 + 두꺼운 파란 링 */
.giscus .gsc-reactions .gsc-reaction-button:is(:focus-visible,[aria-pressed="true"]){
  background: #fff !important;
  border: 0 !important;
  outline: 0 !important;
  box-shadow: 0 0 0 3px var(--c-accent) !important;
  border-radius: 9999px !important;
}
